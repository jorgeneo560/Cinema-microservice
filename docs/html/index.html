<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cinema Microservice: Cinema Microservice - Real-Time Booking System</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Cinema Microservice<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Real-time cinema booking system with WebSocket communication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Cinema Microservice - Real-Time Booking System </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p>The Cinema Microservice is a modern C++ application that provides real-time seat booking functionality for movie theaters. Built with clean architecture principles, it features WebSocket-based communication for instant updates across multiple clients.</p>
<h1><a class="anchor" id="features_sec"></a>
Key Features</h1>
<ul>
<li><b>Real-Time Communication</b>: WebSocket-based server-client architecture</li>
<li><b>Thread-Safe Operations</b>: Concurrent seat booking with proper synchronization</li>
<li><b>Clean Architecture</b>: Separation of concerns with distinct layers</li>
<li><b>Interactive UI</b>: User-friendly booking interface with visual seat layouts</li>
<li><b>Multi-Client Support</b>: Server handles multiple concurrent booking sessions</li>
<li><b>Comprehensive Testing</b>: 111+ unit tests with 100% pass rate</li>
<li><b>Professional Documentation</b>: Complete API documentation with examples</li>
</ul>
<h1><a class="anchor" id="arch_sec"></a>
Architecture Overview</h1>
<p>The system follows clean architecture principles with the following layers:</p>
<h2><a class="anchor" id="data_layer"></a>
Data Layer</h2>
<ul>
<li><a class="el" href="classShows.html" title="Server-side movie show data structure with thread-safe seat management.">Shows</a> class: Core entity representing movie shows with seat management</li>
<li>Thread-safe operations using shared_mutex for concurrent access</li>
<li>20-seat capacity per show with boolean seat availability tracking</li>
</ul>
<h2><a class="anchor" id="comm_layer"></a>
Communication Layer</h2>
<ul>
<li><b>Client Side</b>: <a class="el" href="classCinemaClient.html" title="WebSocket client for Cinema booking system.">CinemaClient</a> with WebSocket connection management</li>
<li><b>Server Side</b>: <a class="el" href="classWebSocketServer.html" title="Main WebSocket server for Cinema booking system.">WebSocketServer</a> with multi-session handling</li>
<li><b>Protocol</b>: Structured message format for bookings and updates</li>
<li><b>Real-Time Updates</b>: Broadcast notifications for booking changes</li>
</ul>
<h2><a class="anchor" id="business_layer"></a>
Business Logic Layer</h2>
<ul>
<li><a class="el" href="classBookingService.html" title="Service for processing seat booking requests.">BookingService</a>: Handles seat reservation logic and validation</li>
<li><a class="el" href="classCinemaService.html" title="Service for formatting cinema data for client communication.">CinemaService</a>: Manages data formatting and protocol compliance</li>
<li><a class="el" href="classMessageHandler.html" title="High-level message routing and processing service.">MessageHandler</a>: Processes client requests and coordinates responses</li>
</ul>
<h2><a class="anchor" id="ui_layer"></a>
User Interface Layer</h2>
<ul>
<li><a class="el" href="classCinemaUI.html" title="User interface class for Cinema booking system.">CinemaUI</a>: Pure presentation layer with no business logic coupling</li>
<li>Interactive menus and seat selection interface</li>
<li>Input validation and user experience optimization</li>
</ul>
<h2><a class="anchor" id="app_layer"></a>
Application Layer</h2>
<ul>
<li>Client main: Coordinates UI and communication components</li>
<li>Server main: Initializes data and manages WebSocket infrastructure</li>
</ul>
<h1><a class="anchor" id="tech_sec"></a>
Technology Stack</h1>
<ul>
<li><b>Language</b>: C++17</li>
<li><b>Networking</b>: Boost.Beast WebSocket library</li>
<li><b>Async I/O</b>: Boost.Asio for non-blocking operations</li>
<li><b>Threading</b>: std::shared_mutex for thread-safe data access</li>
<li><b>Build System</b>: CMake with Conan package management</li>
<li><b>Testing</b>: Custom lightweight testing framework</li>
<li><b>Documentation</b>: Doxygen with PlantUML diagrams</li>
</ul>
<h1><a class="anchor" id="usage_sec"></a>
Quick Start Guide</h1>
<h2><a class="anchor" id="build_sec"></a>
Building the Project</h2>
<div class="fragment"><div class="line"># Install dependencies</div>
<div class="line">conan install . --output-folder=build --build=missing</div>
<div class="line"> </div>
<div class="line"># Configure and build</div>
<div class="line">cmake -B build -S . -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE=build/Release/generators/conan_toolchain.cmake</div>
<div class="line">cmake --build build --config Release</div>
</div><!-- fragment --><h2><a class="anchor" id="run_sec"></a>
Running the System</h2>
<div class="fragment"><div class="line"># Start the server (Terminal 1)</div>
<div class="line">./build/cinema</div>
<div class="line"> </div>
<div class="line"># Start the client (Terminal 2)</div>
<div class="line">./build/client/cinema_client</div>
</div><!-- fragment --><h2><a class="anchor" id="test_sec"></a>
Running Tests</h2>
<div class="fragment"><div class="line"># Run all tests</div>
<div class="line">cmake --build build --target run_tests</div>
</div><!-- fragment --><h1><a class="anchor" id="api_sec"></a>
API Overview</h1>
<h2><a class="anchor" id="core_classes"></a>
Core Classes</h2>
<ul>
<li><a class="el" href="classShows.html" title="Server-side movie show data structure with thread-safe seat management.">Shows</a>: Thread-safe movie show with seat management</li>
<li><a class="el" href="classCinemaClient.html" title="WebSocket client for Cinema booking system.">CinemaClient</a>: WebSocket client for server communication</li>
<li><a class="el" href="classWebSocketServer.html" title="Main WebSocket server for Cinema booking system.">WebSocketServer</a>: Multi-client WebSocket server</li>
<li><a class="el" href="classCinemaUI.html" title="User interface class for Cinema booking system.">CinemaUI</a>: Interactive user interface</li>
</ul>
<h2><a class="anchor" id="key_operations"></a>
Key Operations</h2>
<div class="fragment"><div class="line"><span class="comment">// Thread-safe seat booking</span></div>
<div class="line"><a class="code hl_class" href="classShows.html">Shows</a> show(<span class="stringliteral">&quot;Inception&quot;</span>, <span class="stringliteral">&quot;2025-09-18 19:30&quot;</span>, <span class="stringliteral">&quot;IMAX&quot;</span>);</div>
<div class="line">std::vector&lt;uint8_t&gt; seats = {1, 2, 3};</div>
<div class="line"><span class="keywordtype">bool</span> success = show.bookSeats(seats);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// WebSocket client connection</span></div>
<div class="line"><a class="code hl_class" href="classCinemaClient.html">CinemaClient</a> client;</div>
<div class="line">client.<a class="code hl_function" href="classCinemaClient.html#a1f89a855f15fbe3b9a321927522e7a68">connect</a>(<span class="stringliteral">&quot;localhost&quot;</span>, <span class="stringliteral">&quot;8080&quot;</span>);</div>
<div class="line">client.<a class="code hl_function" href="classCinemaClient.html#acb6d41c939b3a8426d64c20b730c4887">sendMessage</a>(<span class="stringliteral">&quot;get_data&quot;</span>);</div>
<div class="ttc" id="aclassCinemaClient_html"><div class="ttname"><a href="classCinemaClient.html">CinemaClient</a></div><div class="ttdoc">WebSocket client for Cinema booking system.</div><div class="ttdef"><b>Definition</b> <a href="websocket__client_8hpp_source.html#l00071">websocket_client.hpp:71</a></div></div>
<div class="ttc" id="aclassCinemaClient_html_a1f89a855f15fbe3b9a321927522e7a68"><div class="ttname"><a href="classCinemaClient.html#a1f89a855f15fbe3b9a321927522e7a68">CinemaClient::connect</a></div><div class="ttdeci">bool connect(const std::string &amp;host, const std::string &amp;port)</div><div class="ttdoc">Connect to Cinema server.</div><div class="ttdef"><b>Definition</b> <a href="websocket__client_8cpp_source.html#l00017">websocket_client.cpp:17</a></div></div>
<div class="ttc" id="aclassCinemaClient_html_acb6d41c939b3a8426d64c20b730c4887"><div class="ttname"><a href="classCinemaClient.html#acb6d41c939b3a8426d64c20b730c4887">CinemaClient::sendMessage</a></div><div class="ttdeci">void sendMessage(const std::string &amp;message)</div><div class="ttdoc">Send message to server.</div><div class="ttdef"><b>Definition</b> <a href="websocket__client_8cpp_source.html#l00077">websocket_client.cpp:77</a></div></div>
<div class="ttc" id="aclassShows_html"><div class="ttname"><a href="classShows.html">Shows</a></div><div class="ttdoc">Server-side movie show data structure with thread-safe seat management.</div><div class="ttdef"><b>Definition</b> <a href="cinema_8hpp_source.html#l00032">cinema.hpp:32</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="workflow_sec"></a>
Booking Workflow</h1>
<ol type="1">
<li><b>Client Connection</b>: Client connects to server via WebSocket</li>
<li><b>Data Sync</b>: Server sends current cinema data to client</li>
<li><b>Show Selection</b>: User selects theater, movie, and showtime</li>
<li><b>Seat Selection</b>: Visual seat layout shows availability</li>
<li><b>Booking Request</b>: Client sends booking data to server</li>
<li><b>Server Processing</b>: Server validates and processes booking</li>
<li><b>Confirmation</b>: Success/error response sent to client</li>
<li><b>Broadcast Update</b>: All clients receive real-time updates</li>
</ol>
<h1><a class="anchor" id="components_sec"></a>
Component Documentation</h1>
<p>For detailed API documentation, see:</p>
<ul>
<li><a class="el" href="classShows.html">Shows Class</a> - Core data structure</li>
<li><a class="el" href="classCinemaClient.html">CinemaClient Class</a> - WebSocket client</li>
<li><a class="el" href="classWebSocketServer.html">WebSocketServer Class</a> - Server infrastructure</li>
<li><a class="el" href="classCinemaUI.html">CinemaUI Class</a> - User interface</li>
<li><a class="el" href="classBookingService.html">BookingService Class</a> - Booking logic</li>
<li><a class="el" href="classCinemaService.html">CinemaService Class</a> - Data formatting</li>
</ul>
<h1><a class="anchor" id="contrib_sec"></a>
Contributing</h1>
<p>The codebase follows clean architecture principles:</p><ul>
<li>Maintain separation of concerns between layers</li>
<li>Ensure thread safety for concurrent operations</li>
<li>Add comprehensive tests for new functionality</li>
<li>Update documentation for API changes</li>
<li>Follow C++ best practices and coding standards</li>
</ul>
<h1><a class="anchor" id="license_sec"></a>
License</h1>
<p>This project is licensed under the terms specified in the LICENSE file.</p>
<dl class="section author"><dt>Author</dt><dd>Jorge Royon </dd></dl>
<dl class="section date"><dt>Date</dt><dd>September 18, 2025 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
