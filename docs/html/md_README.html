<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cinema Microservice: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Cinema Microservice<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Real-time cinema booking system with WebSocket communication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">README</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Cinema Microservice</p>
<p>A real-time cinema booking system built with C++ and WebSocket technology.</p>
<p>Overview</p>
<p>This project implements a cinema booking system with a server-client architecture. The server manages movie shows and seat availability, while the client provides an interactive booking interface. Communication happens in real-time through WebSocket connections.</p>
<p>Features</p>
<ul>
<li>Real-time seat availability updates</li>
<li>Multiple theater and movie support</li>
<li>Interactive booking interface</li>
<li>Thread-safe seat management</li>
<li>WebSocket-based communication</li>
<li><p class="startli">Clean architecture with separated business logic</p>
<p class="startli">Architecture</p>
<p class="startli">Server Components</p>
</li>
<li>Main server application with hardcoded movie data</li>
<li>WebSocket server for real-time communication</li>
<li>Cinema library with business logic services</li>
<li><p class="startli">Thread-safe <a class="el" href="classShows.html" title="Server-side movie show data structure with thread-safe seat management.">Shows</a> class for seat management</p>
<p class="startli">Client Components</p>
</li>
<li>Interactive command-line interface</li>
<li>WebSocket client for server communication</li>
<li>Real-time seat availability display</li>
<li><p class="startli">Booking confirmation system</p>
<p class="startli">Project Structure</p>
</li>
</ul>
<div class="fragment"><div class="line">Cinema-microservice/</div>
<div class="line">├── server/</div>
<div class="line">│   ├── main.cpp                 # Server entry point</div>
<div class="line">│   └── lib/</div>
<div class="line">│       ├── cinema.cpp          # Business logic implementation</div>
<div class="line">│       ├── cinema.hpp          # Business logic headers</div>
<div class="line">│       ├── websocket_server.cpp # WebSocket networking</div>
<div class="line">│       └── websocket_server.hpp # WebSocket headers</div>
<div class="line">├── client/</div>
<div class="line">│   ├── main.cpp                # Client entry point</div>
<div class="line">│   └── lib/</div>
<div class="line">│       ├── cinema_Client.cpp   # Shows data model</div>
<div class="line">│       ├── cinema_Client.hpp   # Shows data headers</div>
<div class="line">│       ├── websocket_client.cpp # WebSocket client</div>
<div class="line">│       ├── websocket_client.hpp # WebSocket client headers</div>
<div class="line">│       ├── CinemaUI.cpp        # User interface</div>
<div class="line">│       └── CinemaUI.hpp        # User interface headers</div>
<div class="line">├── build/                      # Build output directory</div>
<div class="line">├── CMakeLists.txt             # Main build configuration</div>
<div class="line">└── README.md                  # This file</div>
</div><!-- fragment --><p>Requirements</p>
<ul>
<li>C++20 compiler</li>
<li>CMake 3.15 or higher</li>
<li>Conan package manager</li>
<li>Boost libraries (system, websocket)</li>
<li><p class="startli">Linux environment</p>
<p class="startli">Building and Running</p>
<p class="startli">Option 1: Using Docker</p>
</li>
</ul>
<p>Docker provides the easiest way to build and run the Cinema microservice without dealing with dependencies.</p>
<p>Prerequisites</p><ul>
<li>Docker</li>
<li><p class="startli">Docker Compose</p>
<p class="startli">Quick Start </p><div class="fragment"><div class="line"> Make the script executable and run everything</div>
<div class="line">chmod +x start_docker.sh</div>
<div class="line">./start-docker.sh</div>
</div><!-- fragment --><p class="startli">Manual Docker Commands </p><div class="fragment"><div class="line"> Build containers</div>
<div class="line">docker-compose build</div>
<div class="line"> </div>
<div class="line"> Start server only</div>
<div class="line">docker-compose up -d cinema-server</div>
<div class="line"> </div>
<div class="line"> Test with wscat in client container</div>
<div class="line">docker exec -it cinema-client wscat -c ws://cinema-server:8080</div>
<div class="line"> </div>
<div class="line"> Use C++ client</div>
<div class="line">docker-compose run --rm cinema-client ./build/client/cinema_client</div>
<div class="line"> </div>
<div class="line"> View server logs</div>
<div class="line">docker-compose logs cinema-server</div>
<div class="line"> </div>
<div class="line"> Stop everything</div>
<div class="line">docker-compose down</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="autotoc_md0"></a>
Documentation</h2>
<p>The project includes comprehensive Doxygen documentation for all classes and functions.</p>
<h3><a class="anchor" id="autotoc_md1"></a>
Generating Documentation</h3>
<p>To generate the API documentation:</p>
<div class="fragment"><div class="line"># Make the script executable</div>
<div class="line">chmod +x generate_docs.sh</div>
<div class="line"> </div>
<div class="line"># Generate documentation</div>
<div class="line">./generate_docs.sh</div>
</div><!-- fragment --><p>Alternatively, you can run Doxygen directly: </p><div class="fragment"><div class="line"># Install Doxygen (if not already installed)</div>
<div class="line">sudo apt install doxygen graphviz</div>
<div class="line"> </div>
<div class="line"># Generate documentation</div>
<div class="line">doxygen</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2"></a>
Viewing Documentation</h3>
<p>After generating the documentation, you can view it in several ways:</p>
<div class="fragment"><div class="line"># Use the viewing script (opens in browser)</div>
<div class="line">chmod +x view_docs.sh</div>
<div class="line">./view_docs.sh</div>
<div class="line"> </div>
<div class="line"># Or open directly</div>
<div class="line">open docs/html/index.html           # macOS</div>
<div class="line">xdg-open docs/html/index.html       # Linux</div>
</div><!-- fragment --><p>The documentation includes:</p><ul>
<li>Class hierarchies and relationships</li>
<li>Function and method descriptions</li>
<li>Code examples and usage patterns</li>
<li>Dependency graphs</li>
<li><p class="startli">Source code cross-references</p>
<p class="startli">Option 2: Local Build</p>
<p class="startli">Building the Project</p>
</li>
</ul>
<ol type="1">
<li>Install dependencies using Conan: <div class="fragment"><div class="line">conan install . --output-folder=build --build=missing</div>
</div><!-- fragment --></li>
<li><p class="startli">Build the project: </p><div class="fragment"><div class="line">cmake -B build -S . -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE=build/Release/generators/conan_toolchain.cmake</div>
<div class="line">cmake --build build --config Release</div>
</div><!-- fragment --><p class="startli">Running the Application</p>
<p class="startli">Start the Server </p><div class="fragment"><div class="line">./build/cinema</div>
</div><!-- fragment --><p> The server will start on localhost:8080 and display available shows.</p>
<p class="startli">Start the Client </p><div class="fragment"><div class="line">./build/client/cinema_client</div>
</div><!-- fragment --><p class="startli">Usage</p>
<p class="startli">Server The server automatically starts with predefined movie data:</p>
</li>
</ol>
<ul>
<li>3 theaters: PVR, IMAX, Cinepolis</li>
<li>3 movies: Inception, Interstellar, Tenet</li>
<li><p class="startli">20 seats per show with different occupancy patterns</p>
<p class="startli">Client Menu Options</p>
</li>
</ul>
<ol type="1">
<li>View Movies - Display all available shows and seats</li>
<li>Book Seats - Interactive booking process</li>
<li>Help - Booking instructions</li>
<li><p class="startli">Exit - Close the application</p>
<p class="startli">Booking Process</p>
</li>
</ol>
<ol type="1">
<li>Select a theater from the available list</li>
<li>Choose a movie and showtime</li>
<li>View seat layout and availability</li>
<li>Select desired seats (comma or space separated)</li>
<li><p class="startli">Confirm booking</p>
<p class="startli">WebSocket Testing</p>
</li>
</ol>
<p>You can also interact directly with the server using WebSocket tools to see real-time data and make custom reservations.</p>
<p>Using wscat for Testing Install wscat globally: </p><div class="fragment"><div class="line">npm install -g wscat</div>
</div><!-- fragment --><p>Connect to the server: </p><div class="fragment"><div class="line">npx wscat -c ws://localhost:8080</div>
</div><!-- fragment --><p>Available Commands</p><ul>
<li><code>get_data</code> - Get current cinema data and seat availability</li>
<li><code>refresh</code> - Refresh cinema data</li>
<li><p class="startli"><code>theater,movie,seat1,seat2,...</code> - Make a reservation</p>
<p class="startli">Example Reservation To book seats 3 and 4 for Inception at PVR theater: </p><div class="fragment"><div class="line">PVR,Inception,3,4</div>
</div><!-- fragment --></li>
</ul>
<p>The server will respond with either:</p><ul>
<li><code>SUCCESS: Booked seats 3, 4 for Inception at PVR</code> (if successful)</li>
<li><code>ERROR: One or more seats are already booked or invalid</code> (if failed)</li>
</ul>
<p>After successful bookings, all connected clients receive real-time updates showing the new seat availability.</p>
<p>Technical Details</p>
<p>Communication Protocol</p><ul>
<li>WebSocket-based real-time communication</li>
<li>JSON-like message format for data exchange</li>
<li>Automatic seat availability updates</li>
<li><p class="startli">Broadcast updates to all connected clients</p>
<p class="startli">Seat Management</p>
</li>
<li>Thread-safe operations using shared_mutex</li>
<li>20 seats per show (numbered 1-20)</li>
<li>Real-time availability tracking</li>
<li><p class="startli">Atomic booking operations</p>
<p class="startli">Data Models</p>
</li>
<li><a class="el" href="classShows.html" title="Server-side movie show data structure with thread-safe seat management.">Shows</a> class: Manages movie, theater, datetime, and seat data</li>
<li><a class="el" href="classCinemaService.html" title="Service for formatting cinema data for client communication.">CinemaService</a>: Formats and processes cinema data</li>
<li><a class="el" href="classBookingService.html" title="Service for processing seat booking requests.">BookingService</a>: Handles seat reservation logic</li>
<li><p class="startli"><a class="el" href="classMessageHandler.html" title="High-level message routing and processing service.">MessageHandler</a>: Processes client-server communication</p>
<p class="startli">Error Handling</p>
</li>
</ul>
<p>The system includes comprehensive error handling for:</p><ul>
<li>Network connection failures</li>
<li>Invalid booking requests</li>
<li>Seat unavailability</li>
<li>Client disconnections</li>
<li><p class="startli">Malformed messages</p>
<p class="startli">Development</p>
<p class="startli">Code Organization</p>
</li>
<li>Business logic separated from networking code</li>
<li>Clean architecture with service classes</li>
<li><p class="startli">Header-implementation file separation</p>
<p class="startli">Thread Safety</p>
</li>
<li>Shared mutexes for concurrent read access</li>
<li>Exclusive locks for seat modifications</li>
<li><p class="startli">Thread-safe message queuing</p>
<p class="startli">Future Enhancements</p>
</li>
</ul>
<p>Potential improvements could include:</p><ul>
<li>Database integration for persistent data</li>
<li>User authentication system</li>
<li>Payment processing integration</li>
<li>REST API endpoints</li>
<li>Web-based client interface</li>
<li>Show scheduling system</li>
<li><p class="startli">Advanced seat selection features</p>
<p class="startli">License</p>
</li>
</ul>
<p>This project is a coding test implementation. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
